<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Flex - Pagination</title>
      <meta name="viewport" content="width=device-width">

      <!-- syntax highlighting CSS -->
      <link rel="stylesheet" href="/css/syntax.css">

      <!-- Custom CSS -->
      <link rel="stylesheet" href="/css/main.css">

      <!-- Responsive CSS -->
      <link rel="stylesheet" href="/css/responsive.css">

      <!-- Google Fonts -->
      <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>
      <link href='https://fonts.googleapis.com/css?family=Raleway:300,400,700' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div class="site">
      <div class="sidebar" id="sidebar">
        <div class="header">
          
            <h1 class="title"><a href="/es"><img id="logo" src="/images/logo.png"></a></h1>
          
          <span class="tagline">Español</span>
        </div>
        <div class="posts">
          <ul class="posts-list">
            
              <li class="post-link">
                <a class="post-title" href="/es/tiny-log-decorator/">
                  A tiny python log decorator 
                </a>
              </li>
            
            
              <hr>
              
                
                  
                    <li class="post-link">
                      <a class="post-title" href="/es/pagination/">
                        Pagination - es
                      </a>
                    </li>
                  
                
              
                
              
                
                  
                    <li class="post-link">
                      <a class="post-title" href="/es/equipo/">
                        Permalink - es
                      </a>
                    </li>
                  
                
              
                
                  
                    <li class="post-link">
                      <a class="post-title" href="/es/assets/css/style.css">
                         - es
                      </a>
                    </li>
                  
                
              
                
                  
                    <li class="post-link">
                      <a class="post-title" href="/es/feed.xml">
                         - es
                      </a>
                    </li>
                  
                
              
                
                  
                    <li class="post-link">
                      <a class="post-title" href="/es/sitemap.xml">
                         - es
                      </a>
                    </li>
                  
                
              
                
                  
                    <li class="post-link">
                      <a class="post-title" href="/es/robots.txt">
                         - es
                      </a>
                    </li>
                  
                
              
            
          </ul>
        </div>
        <div class="footer">
          <span id="footer-links">
            <a href="" class="footer-link">Sobre</a> <span class="separator">&bull;</span>
            <a href="" class="footer-link">Twitter</a> <span class="separator">&bull;</span>
            <a href="" class="footer-link">GitHub</a>
          </span>
        </div>
        <h3 id="footer">Footer</h3>
<p>Questo è un footer tradotto!</p>

        <br />
        <a class="link-it" href="/it/">it</a>
        <a class="link-en" href="/en/">en</a>
        <a class="link-es" href="/es/">es</a>
      </div>

        

<div class="content" id="home">
  <div id="sidebar-button">
    <img src="/images/sidebar-button.png">
  </div>
  <div id="post-info">
    <div id="cover-photo-container">
      <img id="cover-photo" src="/images/cover.jpg">
    </div>
    <div id="info-container">
      <h1 id="title">Paginación</h1>
    </div>
  </div>

  <div class="post">
    <div align="right">
      <!-- Adds links to other languages on the post -->
      
        
          
            <a href="/pagination/" >Galego</a>
          
          
          
          
          
            <span class="separator"> &bull; </span>
          
          
        
      
        
          
            <a href="/en/pagination/" >English</a>
          
          
          
          
          
          
        
      
        
      
    </div>

    <!-- This loops through the paginated posts -->
    
      <h1><a href="/es/tiny-log-decorator/">A tiny python log decorator</a></h1>
      <div class="content">
        <p>This post is only a compilation from others posts that i read for create a log decorator.</p>

<p>Firstly, we need to configure a log properly, an good example can be found <a href="https://docs.python.org/3/howto/logging.html">here</a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">'decorator-log'</span><span class="p">)</span>
<span class="n">logger</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="c1"># create console handler and set level to debug
</span><span class="n">ch</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">StreamHandler</span><span class="p">()</span>
<span class="n">ch</span><span class="p">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="c1"># create formatter
</span><span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span><span class="p">)</span>

<span class="c1"># add formatter to ch
</span><span class="n">ch</span><span class="p">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>

<span class="c1"># add ch to logger
</span><span class="n">logger</span><span class="p">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span>
</code></pre></div></div>

<p>Once log instance is configured, we create decorator using it.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">import</span> <span class="nn">functools</span>
<span class="k">class</span> <span class="nc">LogDecorator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">'decorator-log'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn</span><span class="p">):</span>
        <span class="o">@</span><span class="n">functools</span><span class="p">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">decorated</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">logger</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="s">"{0} - {1} - {2}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">fn</span><span class="p">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">))</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">logger</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">result</span>
            <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">logger</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="s">"Exception {0}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span>
                <span class="k">raise</span> <span class="n">ex</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">decorated</span>
</code></pre></div></div>
<p>It’s almost done, we need to decorate some functions to test it:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Start example
</span><span class="o">@</span><span class="n">LogDecorator</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span>

<span class="o">@</span><span class="n">LogDecorator</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">crash</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>

<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">crash</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div></div>
<p>Our output will be:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2018-12-04 23:37:44,110 - decorator-log - DEBUG - func - (1, 2, 3) - {}
2018-12-04 23:37:44,110 - decorator-log - DEBUG - 6
2018-12-04 23:37:44,110 - decorator-log - DEBUG - crash - (1, 3) - {}
2018-12-04 23:37:44,110 - decorator-log - DEBUG - Exception 1
</code></pre></div></div>

      </div>
    

    <!-- Pagination links -->
    <div class="pagination">
      
        <span class="previous">Previous</span>
      
      <span class="page_number ">Page: 1 of 1</span>
      
        <span class="next ">Next</span>
      
    </div>
  </div>
</div>


    </div>
    <script src="/scripts/responsive.js" type="text/javascript"></script>
  </body>
</html>
